ðŸ”´ Ejemplo de configuraciÃ³n insegura (redactada)
# Vertex AI â€“ Reasoning Engine (INSEGURA)
reasoningEngine:
  permissions:
    - aiplatform.reasoningEngines.update
  tools:
    allowDynamicCode: true
    sourceValidation: disabled
  serviceAccount: service-<project>@gcp-sa-aiplatform-re.iam.gserviceaccount.com

# Ray on Vertex AI â€“ Persistent Resource (INSEGURA)
rayCluster:
  iamRoles:
    - roles/aiplatform.viewer
  interactiveShell:
    enabled: true
  metadataServer:
    access: unrestricted

# TorchServe (INSEGURA)
management_address=0.0.0.0
allowed_urls=*

ðŸŸ¢ Ejemplo de configuraciÃ³n segura recomendada
# Vertex AI â€“ Reasoning Engine (SEGURA)
reasoningEngine:
  permissions:
    - aiplatform.reasoningEngines.get
  tools:
    allowDynamicCode: false
    sourceValidation: enabled
    codeReviewRequired: true
  serviceAccount: custom-vertex-re-sa@project.iam.gserviceaccount.com

# Ray on Vertex AI â€“ Persistent Resource (SEGURA)
rayCluster:
  iamRoles:
    - roles/aiplatform.user
  interactiveShell:
    enabled: false
  metadataServer:
    access: restricted

# TorchServe (SEGURA)
management_address=127.0.0.1
allowed_urls=https://storage.googleapis.com/my-approved-model-bucket/*

âš–ï¸ ComparaciÃ³n: Default vs Hardened
Componente	Default	Hardened
Agent Engine tools	CÃ³digo dinÃ¡mico permitido	CÃ³digo estÃ¡tico validado
Update permissions	Viewer puede actualizar	Solo rol personalizado
Ray shell	Habilitada	Deshabilitada
Metadata access	Sin restricciÃ³n	Controlado
TorchServe API	Expuesta	Solo localhost
allowed_urls	Wildcard	URLs explÃ­citas
ðŸ§© Plantillas de roles IAM personalizados
ðŸ” Rol: Vertex AI Restricted Viewer
title: VertexAIRestrictedViewer
description: Acceso de solo lectura sin capacidades de abuso
includedPermissions:
  - aiplatform.reasoningEngines.get
  - aiplatform.persistentResources.get
excludedPermissions:
  - aiplatform.reasoningEngines.update
  - aiplatform.persistentResources.list
  - iam.serviceAccounts.actAs

ðŸ” Rol: Vertex AI Secure Operator
title: VertexAISecureOperator
description: Operador controlado con mÃ­nimos privilegios
includedPermissions:
  - aiplatform.jobs.create
  - aiplatform.jobs.get
  - aiplatform.endpoints.predict
excludedPermissions:
  - aiplatform.reasoningEngines.update
  - iam.serviceAccounts.signBlob

âš™ï¸ ConfiguraciÃ³n correcta de TorchServe
# MitigaciÃ³n CVE-2023-43654

# Nunca exponer la API de management
management_address=127.0.0.1

# Restringir modelos solo a ubicaciones confiables
allowed_urls=https://storage.googleapis.com/vertex-approved-models/*

# VersiÃ³n mÃ­nima segura
torchserve.version>=0.8.2
